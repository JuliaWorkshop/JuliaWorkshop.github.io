Project Euler Question 12
========================================
- The sequence of triangle numbers is generated by adding the natural numbers. 
- So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28. 
- The first ten terms would be: *1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...*
- Let us list the factors of the first seven triangle numbers:

  -  1: 1
  -  3: 1,3
  -  6: 1,2,3,6
  -  10: 1,2,5,10
  -  15: 1,3,5,15
  -  21: 1,3,7,21
  -  28: 1,2,4,7,14,28

- We can see that 28 is the first triangle number to have over five divisors.
- What is the value of the first triangle number to have over five hundred divisors?

Let's solve this problem using Julia. We need to find the first triangle number that has over 500 divisors.

Here's the approach:
1. Generate triangle numbers.
2. Count the divisors of each triangle number.
3. Find the first triangle number with more than 500 divisors.

We'll use a loop to generate triangle numbers and a function to count the divisors of a number.

```julia
# Function to generate the n-th triangle number
function triangle_number(n)
    return div(n * (n + 1), 2)
end

# Function to count the number of divisors of a number
function count_divisors(n)
    count = 0
    for i in 1:sqrt(n)
        if n % i == 0
            count += (i * i == n) ? 1 : 2
        end
    end
    return count
end

# Main loop to find the first triangle number with over 500 divisors
n = 1
while true
    t = triangle_number(n)
    divisors = count_divisors(t)
    if divisors > 500
        println("The first triangle number with over 500 divisors is: $t")
        break
    end
    n += 1
end
```

When you run this code in a Julia environment, it will calculate and print the first triangle number that has over 500 divisors. This solution effectively combines the generation of triangle numbers with the divisor count to find the required value.

<pre><code>
#problem 12

function divisors(n)
	divs = [1,n]
	for i=1:iround(sqrt(n))
		if n%i==0
			divs = [divs, i, div(n,i)]
		end
	end
	return divs
end

function num_divisors(n)
	return length(divisors(n))
end

function triangle_nums()
	i = 1
	while true
		produce(div(i*(i+1),2))
		i += 1
	end
end

function main()
	triangs = Task(triangle_nums)
	while true
		test = consume(triangs)
		if num_divisors(test) > 500
			println("The answer is: ", test)
			break
		end
	end
end


println(@elapsed main())
println(@elapsed main())
</code></pre>

<pre><code>
function numFactors(num)
    out = 1
    cur = num
    max = convert(Int64, ceil(sqrt(num)))
    for pr in primes(max)
        offset = 0
        order = 0
        while mod(cur, pr) == 0
            offset = 1
            order += 1
            cur = convert(Int64, cur / pr)
        end
        tot = offset + order
        if tot > 0
            out *= offset + order
        end
    end
    return out
end

function main(n)
    i = 1
    tri = 1
    while true
        if numFactors(tri) > n
            println(tri)
			return
        end
        i += 1
        tri += i
    end
end

println(@elapsed main(500))
</code></pre>
